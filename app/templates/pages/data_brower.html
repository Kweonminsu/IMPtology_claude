{% extends "base.html" %}

{% block title %}IMPtology - 데이터 브라우저{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/data_browser.css') }}">
{% endblock %}

{% block page_title %}데이터 브라우저{% endblock %}

{% block content %}
<div class="data-browser">
    <div class="data-browser-header">
        <div class="browser-tabs">
            <button class="browser-tab active">데이터 소스</button>
            <button class="browser-tab">테이블</button>
            <button class="browser-tab">쿼리 빌더</button>
            <button class="browser-tab">저장된 쿼리</button>
        </div>
        
        <div class="browser-actions">
            <button class="action-button">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                새 쿼리
            </button>
            <button class="action-button">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                    <polyline points="7 10 12 15 17 10"></polyline>
                    <line x1="12" y1="15" x2="12" y2="3"></line>
                </svg>
                내보내기
            </button>
        </div>
    </div>
    
    <div class="data-browser-content">
        <div class="side-panel">
            <div class="search-filter">
                <input type="text" placeholder="데이터 소스 검색">
                <button class="filter-button">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"></polygon>
                    </svg>
                </button>
            </div>
            
            <div class="data-sources-tree">
                <div class="tree-category">
                    <div class="category-header">
                        <button class="toggle-button expanded">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </button>
                        <span class="category-name">생산 데이터</span>
                        <span class="category-count">12</span>
                    </div>
                    
                    <div class="category-items">
                        <div class="tree-item active">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 8v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                <path d="M10 2v4"></path>
                                <path d="M14 2v4"></path>
                                <path d="M10 18v4"></path>
                                <path d="M14 18v4"></path>
                            </svg>
                            <span>생산라인_A</span>
                        </div>
                        <div class="tree-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 8v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                <path d="M10 2v4"></path>
                                <path d="M14 2v4"></path>
                                <path d="M10 18v4"></path>
                                <path d="M14 18v4"></path>
                            </svg>
                            <span>생산라인_B</span>
                        </div>
                        <div class="tree-item">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 8v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                <path d="M10 2v4"></path>
                                <path d="M14 2v4"></path>
                                <path d="M10 18v4"></path>
                                <path d="M14 18v4"></path>
                            </svg>
                            <span>생산라인_C</span>
                        </div>
                    </div>
                </div>
                
                <div class="tree-category">
                    <div class="category-header">
                        <button class="toggle-button">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                        <span class="category-name">품질 데이터</span>
                        <span class="category-count">8</span>
                    </div>
                </div>
                
                <div class="tree-category">
                    <div class="category-header">
                        <button class="toggle-button">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                        <span class="category-name">설비 상태</span>
                        <span class="category-count">15</span>
                    </div>
                </div>
                
                <div class="tree-category">
                    <div class="category-header">
                        <button class="toggle-button">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 18 15 12 9 6"></polyline>
                            </svg>
                        </button>
                        <span class="category-name">공정 분석</span>
                        <span class="category-count">7</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="main-content">
            <div class="table-header">
                <div class="table-info">
                    <h2 class="table-title">생산라인_A</h2>
                    <div class="table-meta">
                        <span class="table-source">생산관리시스템</span>
                        <span class="table-updated">최종 업데이트: 5분 전</span>
                        <span class="table-records">1,245,673 레코드</span>
                    </div>
                </div>
                
                <div class="table-actions">
                    <button class="table-action-button">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                        <span>공유</span>
                    </button>
                    <button class="table-action-button">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polygon points="16 3 21 8 8 21 3 21 3 16 16 3"></polygon>
                        </svg>
                        <span>편집</span>
                    </button>
                    <button class="table-action-button">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="3" y1="9" x2="21" y2="9"></line>
                            <line x1="9" y1="21" x2="9" y2="9"></line>
                        </svg>
                        <span>테이블 보기</span>
                    </button>
                </div>
            </div>
            
            <div class="query-builder">
                <div class="query-tabs">
                    <button class="query-tab active">쿼리 빌더</button>
                    <button class="query-tab">SQL 에디터</button>
                </div>
                
                <div class="query-filters">
                    <div class="filter-group">
                        <div class="filter-label">선택 컬럼</div>
                        <div class="column-selector">
                            <div class="selected-column">
                                <span>생산일자</span>
                                <button class="remove-column">×</button>
                            </div>
                            <div class="selected-column">
                                <span>생산량</span>
                                <button class="remove-column">×</button>
                            </div>
                            <div class="selected-column">
                                <span>불량수</span>
                                <button class="remove-column">×</button>
                            </div>
                            <button class="add-column">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                            </button>
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <div class="filter-label">필터 조건</div>
                        <div class="filter-conditions">
                            <div class="filter-condition">
                                <select class="condition-column">
                                    <option>생산일자</option>
                                    <option>생산량</option>
                                    <option>불량수</option>
                                    <option>가동시간</option>
                                </select>
                                <select class="condition-operator">
                                    <option>=</option>
                                    <option>></option>
                                    <option><</option>
                                    <option>>=</option>
                                    <option><=</option>
                                    <option>LIKE</option>
                                </select>
                                <input type="text" class="condition-value" placeholder="값 입력">
                                <button class="remove-condition">×</button>
                            </div>
                            <button class="add-condition">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="12" y1="5" x2="12" y2="19"></line>
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                </svg>
                                조건 추가
                            </button>
                        </div>
                    </div>
                    
                    <div class="filter-group">
                        <div class="filter-label">정렬</div>
                        <div class="sort-conditions">
                            <div class="sort-condition">
                                <select class="sort-column">
                                    <option>생산일자</option>
                                    <option>생산량</option>
                                    <option>불량수</option>
                                    <option>가동시간</option>
                                </select>
                                <select class="sort-direction">
                                    <option>오름차순</option>
                                    <option>내림차순</option>
                                </select>
                                <button class="remove-sort">×</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="query-actions">
                        <button class="query-action-button secondary">초기화</button>
                        <button class="query-action-button secondary">저장</button>
                        <button class="query-action-button primary">쿼리 실행</button>
                    </div>
                </div>
            </div>
            
            <div class="query-results">
                <div class="results-header">
                    <div class="results-info">
                        <span class="results-count">1,000 레코드 (2초 소요)</span>
                    </div>
                    <div class="results-actions">
                        <button class="results-action-button">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                <polyline points="7 10 12 15 17 10"></polyline>
                                <line x1="12" y1="15" x2="12" y2="3"></line>
                            </svg>
                            CSV 내보내기
                        </button>
                        <button class="results-action-button">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                <polyline points="21 15 16 10 5 21"></polyline>
                            </svg>
                            차트 생성
                        </button>
                    </div>
                </div>
                
                <div class="results-table-container">
                    <table class="results-table">
                        <thead>
                            <tr>
                                <th>생산일자</th>
                                <th>생산량</th>
                                <th>불량수</th>
                                <th>불량률</th>
                                <th>가동시간</th>
                                <th>설비코드</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>2025-05-01</td>
                                <td>1,523</td>
                                <td>32</td>
                                <td>2.1%</td>
                                <td>7시간 45분</td>
                                <td>EQ-A21</td>
                            </tr>
                            <tr>
                                <td>2025-05-01</td>
                                <td>1,487</td>
                                <td>28</td>
                                <td>1.9%</td>
                                <td>7시간 32분</td>
                                <td>EQ-A22</td>
                            </tr>
                            <tr>
                                <td>2025-05-01</td>
                                <td>1,502</td>
                                <td>35</td>
                                <td>2.3%</td>
                                <td>7시간 41분</td>
                                <td>EQ-A23</td>
                            </tr>
                            <tr>
                                <td>2025-05-01</td>
                                <td>1,498</td>
                                <td>27</td>
                                <td>1.8%</td>
                                <td>7시간 38분</td>
                                <td>EQ-A24</td>
                            </tr>
                            <tr>
                                <td>2025-05-01</td>
                                <td>1,531</td>
                                <td>31</td>
                                <td>2.0%</td>
                                <td>7시간 47분</td>
                                <td>EQ-A25</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="pagination">
                    <button class="pagination-button">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="11 17 6 12 11 7"></polyline>
                            <polyline points="18 17 13 12 18 7"></polyline>
                        </svg>
                    </button>
                    <button class="pagination-button">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                    </button>
                    <button class="pagination-button active">1</button>
                    <button class="pagination-button">2</button>
                    <button class="pagination-button">3</button>
                    <span class="pagination-ellipsis">...</span>
                    <button class="pagination-button">10</button>
                    <button class="pagination-button">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </button>
                    <button class="pagination-button">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="13 17 18 12 13 7"></polyline>
                            <polyline points="6 17 11 12 6 7"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/data_browser.js') }}"></script>
{% endblock %}
